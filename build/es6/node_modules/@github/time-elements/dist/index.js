const e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t=["January","February","March","April","May","June","July","August","September","October","November","December"];function pad(e){return`0${e}`.slice(-2)}function strftime(n,r){const a=n.getDay(),i=n.getDate(),o=n.getMonth(),s=n.getFullYear(),m=n.getHours(),c=n.getMinutes(),l=n.getSeconds();return r.replace(/%([%aAbBcdeHIlmMpPSwyYZz])/g,(function(r){let u;switch(r[1]){case"%":return"%";case"a":return e[a].slice(0,3);case"A":return e[a];case"b":return t[o].slice(0,3);case"B":return t[o];case"c":return n.toString();case"d":return pad(i);case"e":return String(i);case"H":return pad(m);case"I":return pad(strftime(n,"%l"));case"l":return String(0===m||12===m?12:(m+12)%12);case"m":return pad(o+1);case"M":return pad(c);case"p":return m>11?"PM":"AM";case"P":return m>11?"pm":"am";case"S":return pad(l);case"w":return String(a);case"y":return pad(s%100);case"Y":return String(s);case"Z":return u=n.toString().match(/\((\w+)\)$/),u?u[1]:"";case"z":return u=n.toString().match(/\w([+-]\d\d\d\d) /),u?u[1]:""}return""}))}function makeFormatter(e){let t;return function(){if(t)return t;if("Intl"in window)try{return t=new Intl.DateTimeFormat(void 0,e),t}catch(e){if(!(e instanceof RangeError))throw e}}}let n=null;const r=makeFormatter({day:"numeric",month:"short"});function isDayFirst(){if(null!==n)return n;const e=r();if(e){const t=e.format(new Date(0));return n=!!t.match(/^\d/),n}return!1}let a=null;const i=makeFormatter({day:"numeric",month:"short",year:"numeric"});function localeFromElement(e){const t=e.closest("[lang]");return t instanceof HTMLElement&&t.lang?t.lang:"default"}const o=new WeakMap;class ExtendedTimeElement extends HTMLElement{static get observedAttributes(){return["datetime","day","format","lang","hour","minute","month","second","title","weekday","year","time-zone-name"]}connectedCallback(){const e=this.getFormattedTitle();e&&!this.hasAttribute("title")&&this.setAttribute("title",e);const t=this.getFormattedDate();t&&(this.textContent=t)}attributeChangedCallback(e,t,n){const r=this.getFormattedTitle();if("datetime"===e){const e=Date.parse(n);isNaN(e)?o.delete(this):o.set(this,new Date(e))}const a=this.getFormattedTitle(),i=this.getAttribute("title");"title"===e||!a||i&&i!==r||this.setAttribute("title",a);const s=this.getFormattedDate();s&&(this.textContent=s)}get date(){return o.get(this)}getFormattedTitle(){const e=this.date;if(!e)return;const t=s();if(t)return t.format(e);try{return e.toLocaleString()}catch(t){if(t instanceof RangeError)return e.toString();throw t}}getFormattedDate(){}}const s=makeFormatter({day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}),m=new WeakMap;class LocalTimeElement extends ExtendedTimeElement{attributeChangedCallback(e,t,n){"hour"!==e&&"minute"!==e&&"second"!==e&&"time-zone-name"!==e||m.delete(this),super.attributeChangedCallback(e,t,n)}getFormattedDate(){const e=this.date;if(!e)return;const t=function formatDate(e,t){const n={weekday:{short:"%a",long:"%A"},day:{numeric:"%e","2-digit":"%d"},month:{short:"%b",long:"%B"},year:{numeric:"%Y","2-digit":"%y"}};let r=isDayFirst()?"weekday day month year":"weekday month day, year";for(const t in n){const a=n[t][e.getAttribute(t)||""];r=r.replace(t,a||"")}return r=r.replace(/(\s,)|(,\s$)/,""),strftime(t,r).replace(/\s+/," ").trim()}(this,e)||"",n=function formatTime(e,t){const n={},r=e.getAttribute("hour");"numeric"!==r&&"2-digit"!==r||(n.hour=r);const a=e.getAttribute("minute");"numeric"!==a&&"2-digit"!==a||(n.minute=a);const i=e.getAttribute("second");"numeric"!==i&&"2-digit"!==i||(n.second=i);const o=e.getAttribute("time-zone-name");"short"!==o&&"long"!==o||(n.timeZoneName=o);if(0===Object.keys(n).length)return;let s=m.get(e);s||(s=makeFormatter(n),m.set(e,s));const c=s();if(c)return c.format(t);return strftime(t,n.second?"%H:%M:%S":"%H:%M")}(this,e)||"";return`${t} ${n}`.trim()}}window.customElements.get("local-time")||(window.LocalTimeElement=LocalTimeElement,window.customElements.define("local-time",LocalTimeElement));class RelativeTime{constructor(e,t){this.date=e,this.locale=t}toString(){const e=this.timeElapsed();if(e)return e;{const e=this.timeAhead();return e||`on ${this.formatDate()}`}}timeElapsed(){const e=(new Date).getTime()-this.date.getTime(),t=Math.round(e/1e3),n=Math.round(t/60),r=Math.round(n/60),a=Math.round(r/24);return e>=0&&a<30?this.timeAgoFromMs(e):null}timeAhead(){const e=this.date.getTime()-(new Date).getTime(),t=Math.round(e/1e3),n=Math.round(t/60),r=Math.round(n/60),a=Math.round(r/24);return e>=0&&a<30?this.timeUntil():null}timeAgo(){const e=(new Date).getTime()-this.date.getTime();return this.timeAgoFromMs(e)}timeAgoFromMs(e){const t=Math.round(e/1e3),n=Math.round(t/60),r=Math.round(n/60),a=Math.round(r/24),i=Math.round(a/30),o=Math.round(i/12);return e<0||t<10?formatRelativeTime(this.locale,0,"second"):t<45?formatRelativeTime(this.locale,-t,"second"):t<90||n<45?formatRelativeTime(this.locale,-n,"minute"):n<90||r<24?formatRelativeTime(this.locale,-r,"hour"):r<36||a<30?formatRelativeTime(this.locale,-a,"day"):i<18?formatRelativeTime(this.locale,-i,"month"):formatRelativeTime(this.locale,-o,"year")}microTimeAgo(){const e=(new Date).getTime()-this.date.getTime(),t=Math.round(e/1e3),n=Math.round(t/60),r=Math.round(n/60),a=Math.round(r/24),i=Math.round(a/30),o=Math.round(i/12);return n<1?"1m":n<60?`${n}m`:r<24?`${r}h`:a<365?`${a}d`:`${o}y`}timeUntil(){const e=this.date.getTime()-(new Date).getTime();return this.timeUntilFromMs(e)}timeUntilFromMs(e){const t=Math.round(e/1e3),n=Math.round(t/60),r=Math.round(n/60),a=Math.round(r/24),i=Math.round(a/30),o=Math.round(i/12);return i>=18||i>=12?formatRelativeTime(this.locale,o,"year"):a>=45||a>=30?formatRelativeTime(this.locale,i,"month"):r>=36||r>=24?formatRelativeTime(this.locale,a,"day"):n>=90||n>=45?formatRelativeTime(this.locale,r,"hour"):t>=90||t>=45?formatRelativeTime(this.locale,n,"minute"):formatRelativeTime(this.locale,t>=10?t:0,"second")}microTimeUntil(){const e=this.date.getTime()-(new Date).getTime(),t=Math.round(e/1e3),n=Math.round(t/60),r=Math.round(n/60),a=Math.round(r/24),i=Math.round(a/30),o=Math.round(i/12);return a>=365?`${o}y`:r>=24?`${a}d`:n>=60?`${r}h`:n>1?`${n}m`:"1m"}formatDate(){let e=isDayFirst()?"%e %b":"%b %e";return function isThisYear(e){return(new Date).getUTCFullYear()===e.getUTCFullYear()}(this.date)||(e+=function isYearSeparator(){if(null!==a)return a;const e=i();if(e){const t=e.format(new Date(0));return a=!!t.match(/\d,/),a}return!0}()?", %Y":" %Y"),strftime(this.date,e)}formatTime(){const e=c();return e?e.format(this.date):strftime(this.date,"%l:%M%P")}}function formatRelativeTime(e,t,n){const r=function makeRelativeFormat(e,t){if("Intl"in window&&"RelativeTimeFormat"in window.Intl)try{return new Intl.RelativeTimeFormat(e,t)}catch(e){if(!(e instanceof RangeError))throw e}}(e,{numeric:"auto"});return r?r.format(t,n):function formatEnRelativeTime(e,t){if(0===e)switch(t){case"year":case"quarter":case"month":case"week":return`this ${t}`;case"day":return"today";case"hour":case"minute":return`in 0 ${t}s`;case"second":return"now"}else if(1===e)switch(t){case"year":case"quarter":case"month":case"week":return`next ${t}`;case"day":return"tomorrow";case"hour":case"minute":case"second":return`in 1 ${t}`}else if(-1===e)switch(t){case"year":case"quarter":case"month":case"week":return`last ${t}`;case"day":return"yesterday";case"hour":case"minute":case"second":return`1 ${t} ago`}else if(e>1)switch(t){case"year":case"quarter":case"month":case"week":case"day":case"hour":case"minute":case"second":return`in ${e} ${t}s`}else if(e<-1)switch(t){case"year":case"quarter":case"month":case"week":case"day":case"hour":case"minute":case"second":return`${-e} ${t}s ago`}throw new RangeError(`Invalid unit argument for format() '${t}'`)}(t,n)}const c=makeFormatter({hour:"numeric",minute:"2-digit"});class RelativeTimeElement extends ExtendedTimeElement{getFormattedDate(){const e=this.date;if(e)return new RelativeTime(e,localeFromElement(this)).toString()}connectedCallback(){l.push(this),u||(updateNowElements(),u=window.setInterval(updateNowElements,6e4)),super.connectedCallback()}disconnectedCallback(){const e=l.indexOf(this);-1!==e&&l.splice(e,1),l.length||u&&(clearInterval(u),u=null)}}const l=[];let u;function updateNowElements(){let e,t,n;for(t=0,n=l.length;t<n;t++)e=l[t],e.textContent=e.getFormattedDate()||""}window.customElements.get("relative-time")||(window.RelativeTimeElement=RelativeTimeElement,window.customElements.define("relative-time",RelativeTimeElement));class TimeAgoElement extends RelativeTimeElement{getFormattedDate(){const e=this.getAttribute("format"),t=this.date;if(t)return"micro"===e?new RelativeTime(t,localeFromElement(this)).microTimeAgo():new RelativeTime(t,localeFromElement(this)).timeAgo()}}window.customElements.get("time-ago")||(window.TimeAgoElement=TimeAgoElement,window.customElements.define("time-ago",TimeAgoElement));class TimeUntilElement extends RelativeTimeElement{getFormattedDate(){const e=this.getAttribute("format"),t=this.date;if(t)return"micro"===e?new RelativeTime(t,localeFromElement(this)).microTimeUntil():new RelativeTime(t,localeFromElement(this)).timeUntil()}}window.customElements.get("time-until")||(window.TimeUntilElement=TimeUntilElement,window.customElements.define("time-until",TimeUntilElement));export{LocalTimeElement,RelativeTimeElement,TimeAgoElement,TimeUntilElement};